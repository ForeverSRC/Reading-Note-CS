# 第5章 格式

## 5.1 格式的目的

今天编写的功能可能很快就被修改，但代码的可读性却会对以后可能发生的修改行为产生深远影响。

## 5.2 垂直格式

### 5.2.1 向报纸学习

源文件也要像报纸文章那样。名称应当简单且一目了然。名称本身应该足够告诉我们是否在正确的模块中。源文件最顶部应该给出高层次概念和算法。细节应往下渐次展开，直至找到源文件中最底层的函数和细节。

### 5.2.2 概念间垂直方向上的区隔

每组代码行展示一条完整的思路，这些思路用空白行区隔开来。

每个空白行都是一条线索，标识出新的独立概念。

### 5.2.3 垂直方向上的靠近

空白行隔开了概念，靠近的代码行则暗示它们之间的紧密关系。

### 5.2.4 垂直距离

关系密切的概念最好放在同一个文件中。

#### 变量声明

* 局部变量声明应尽可能靠近其使用的位置
* 循环控制变量应该总是在循环语句中声明
  * 除非有特殊需求
* 类的成员变量在类顶部声明

#### 相关函数

* 若某个函数调用了另外一个，则应将他们放到一起，调用者应尽可能放在被调用者上方

#### 概念相关

* 概念相关的代码应该放到一起。相关性越强，彼此之间的距离就该越短。

### 5.2.5 垂直顺序

* 自上而下展示函数调用依赖顺序，被调用的函数应该放在执行调用的函数下面
* 最重要的概念先出现，底层细节最后出来
  * 最前面放置这个类的要旨，细节尽量放在后面

## 5.3 横向格式

### 5.3.1 水平方向上的区隔与靠近

### 5.3.2 水平对其

* 没有必要刻意进行
  * java没必要
  * go会通过`go fmt`自动格式化

### 5.3.3 缩进

### 5.3.4 空范围

当`while`或`for`语句的语句体为空时，应该显式用花括号标明

