# 第4章 注释

注释的恰当用法是弥补在用代码表达意图时遭遇的失败。

注释存在的时间越久，就离其所描述的代码越远，越来越变得全然错误——程序员不能坚持维护注释。

程序员应当负责将注释保持在可维护、有关联、精确的高度。

## 4.1 注释不能美化糟糕的代码

相比于注释，代码更具表现力

## 4.2 用代码来阐述

代码要具有可读性

## 4.3 好注释

唯一真正好的注释是你想办法不去写的注释。

### 4.3.1 法律信息

这类注释不应是合同或法典。只要有可能，就指向一份标准许可或其他外部文档，而不要把所有条款放到注释中。

### 4.3.2 提供信息的注释

更好的方式是尽量利用函数名称传达信息。

### 4.3.3 对意图的解释

### 4.3.4 阐释

将某些晦涩难明的参数或返回值的意义翻译为某种可读形式。

### 4.3.5 警示

用于警告其他程序员会出现某种后果。

### 4.3.6 TODO注释

表示认为应该做，但由于某些原因目前还没做的工作。

### 4.3.7 放大

注释可以用来放大某种看起来不合理之物的重要性。

### 4.3.8 公共API中的Javadoc

注意，Javadoc也可能误导、不适用或者提供错误信息

## 4.4 坏注释

### 4.4.1 喃喃自语

任何迫使读者查看其他模块的注释，都没能与读者沟通好，不值所费。

### 4.4.2 多余的注释

### 4.4.3 误导性注释

### 4.4.4 循规式注释

> 所谓每个函数都要有Javadoc或每个变量都要有注释的规矩全然是愚蠢可笑的。这类注释徒然让代码变得散乱，满口胡言，令人迷惑不解。

### 4.4.5 日志式注释

### 4.4.6 废话注释

> 用整理代码的决心替代创造废话的冲动

### 4.4.7 可怕的废话

### 4.4.8 能用函数或变量时就别用注释

### 4.4.9 位置标记

### 4.4.10 括号后面的注释

如果想标记右括号，其实应该做的是缩短函数。

### 4.4.11 归属与署名

源代码控制系统对此有非常完善的记录，没必要增加注释

### 4.4.12 注释掉的代码

被注释的代码，其他人不敢删除。

通过源代码版本控制系统可以很容易获得历史代码，删除那些被注释的代码吧。

### 4.4.13 HTML注释

对阅读造成障碍。除非IDE可以进行自动转换

### 4.4.14 非本地信息

如果一定要写注释，请确保它描述了离它最近的代码。

### 4.4.15 信息过多

### 4.4.16 不明显的联系

注释及其描述的代码之间的联系应该显而易见。

### 4.4.17 函数头

短函数不需要太多描述。为只做一件事的短函数选个好名字，通常要比写函数头注释要好。

### 4.4.18 非ganging代码中的Javadoc

为系统中的类和函数生成Javadoc页并非总有用。

